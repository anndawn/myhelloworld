<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Model</title>
</head>
<style media="screen">
*{margin:0;padding:0;}
#echarts{width: 100%;height: 100%;position: absolute;}
</style>
<body>
   <div id="echarts">

   </div>
</body>
</html>

<script type="text/javascript" src='jquery-3.2.1.min.js'></script>
<script type="text/javascript" src="echarts.min.js"></script>
<script type="text/javascript" src='ss.js'></script>
<script type="text/javascript" src="dt.json?callback=train"></script>
<script type="text/javascript">
var mycharts=echarts.init($('#echarts').get(0));
var option;
var image=new Image();
image.src='r.jpg';
var dataset={
  cate:['旅行社及导游领队',	'住宿设施',	'旅游景区',	'在线旅游企业',	'非法一日游',	'餐饮',	'交通',	'购物',	'旅游部门工作人员',	'游客不文明行为',	'其他'],
  perc:[
    {value:4492, name:'旅行社及导游领队'},
    {value:3995, name:'住宿设施'},
    {value:3013, name:'旅游景区'},
    {value:2991, name:'在线旅游企业'},
    {value:2785, name:'非法一日游'},
    {value:2768, name:'餐饮'},
    {value:2156, name:'交通'},
    {value:1885, name:'购物'},
    {value:1775, name:'旅游部门工作人员'},
    {value:1773, name:'游客不文明行为'},
    {value:1734, name:'其他'}
  ]
}
console.dir(dataset.perc[0]);
var itemStyle = {
  normal: {
      opacity: 0.7,
      color: {
          image: image,
          repeat: 'repeat'
      },
      borderWidth: 3,
      borderColor: '#235894'
  },
  emphasis: {
      shadowBlur: 10,
      shadowOffsetX: 0,
      shadowColor: 'rgba(0, 0, 0, 0.5)'
  }
};
option = {
  title : {
      text: '某站点用户访问来源',
      x:'center'
  },
  tooltip : {
      trigger: 'item',
      formatter: "{b} : {c} ({d}%)"
  },
  legend: {
      orient: 'vertical',
      left: 'left',
      itemStyle: itemStyle,
      data:dataset.cate,
  },
  series : [
      {
          name: '访问来源',
          type: 'pie',
          roseType:'radius',
          radius : '80%',
          center: ['50%', '60%'],
          data:dataset.perc,
          itemStyle: itemStyle
      }
  ]
};
mycharts.setOption(option);
mycharts.on('click',function (params) {
    console.log(data);
    if (params.name=='住宿设施') {
            mycharts.setOption({
                xAxis:{
                    data:data.category
                },
                yAxis:{},
                series:[{
                    type:'bar',
                    name:'accomdation',
                    data:data.data
                }]
            });
        }
})
</script>
